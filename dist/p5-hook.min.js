!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("p5")):"function"==typeof define&&define.amd?define(["exports","p5"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).p5Hook={},t.p5)}(this,(function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(e);function n(t,e){this.options=Object.assign({acc:{x:0,y:0},speed:{x:0,y:0},position:{x:0,y:0},angle:0,rotateSpeed:0,color:255,opacity:1,radius:10,life:-1},e);var i=this.options,o=i.acc,n=i.speed,r=i.position,a=i.angle,s=i.rotateSpeed,p=i.life;this.p=t,this.graphic=this.initGraphic(),this.acceleration=t.createVector(o.x,o.y),this.velocity=t.createVector(n.x,n.y),this.position=t.createVector(r.x,r.y),this.rotateSpeed=s,this.angle=a,this.life=p}function r(t){var e=this;e.options=t,e.items=[],e.app=null,e.context=null}n.prototype.initGraphic=function(){var t=this.p,e=this.options,i=e.width,o=e.height,n=e.radius,r=e.image,a=i&&o,s=a?t.createGraphics(i,o):t.createGraphics(2*n,2*n);return r&&(a?s.image(r,-1,0,i+2,o):s.image(r,-1,0,2*n+2,2*n)),s},n.prototype.run=function(){this.update(),this.display()},n.prototype.update=function(){this.velocity.add(this.acceleration),this.position.add(this.velocity),this.angle+=this.rotateSpeed,-1!==this.life&&(this.life-=1,this.life<=0&&this.onDead&&this.onDead())},n.prototype.display=function(){var t=this.p,e=this.graphic,i=this.position,o=this.options,n=this.angle,r=o.radius,a=o.opacity,s=o.color,p=o.width,c=o.height;if(o.image)return t.imageMode(t.CENTER),t.push(),t.translate(i.x,i.y),t.rotate(t.PI/180*n),t.image(e,0,0),void t.pop();t.stroke(255,0),t.strokeWeight(1),t.fill(s,255*a),r?t.circle(i.x,i.y,r):t.ellipse(i.x,i.y,p,c)},r.prototype.init=function(t,e){var i=this.options;this.app=t,this.context=e,i.beforeSetup&&i.beforeSetup.call(this,t,e)},r.prototype.setup=function(){var t=this.options,e=this.app,i=this.context;if(t.setup){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];t.setup.apply(this,[e,i].concat(n))}},r.prototype.draw=function(){var t=this.options,e=this.app,i=this.context;if(t.draw){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];t.draw.apply(this,[e,i].concat(n))}},r.prototype.addMethod=function(t,e){var i=this;if(i[t])throw Error("[p5-hook] property already defined in process.");i[t]=function(){for(var t=i.app,o=i.context,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(i,[t,o].concat(r))}},t.createParticle=function(t,e){return new n(t,e)},t.createProcess=function(t){return new r(t)},t.useP5=function(t){var e,i=t.container=[],n=function(t){var e=t.width,i=t.height,o=t.bgColor,n=void 0===o?255:o,r=t.container,a=t.on;return function(o){o.setup=function(){o.createCanvas(e,i),a.setup&&a.setup.call(o,o,t);for(var n=0;n<r.length;n++)r[n].setup()},o.draw=function(){if(t.animateState){o.background(n),a.draw&&a.draw.call(o,o,t);for(var e=0;e<r.length;e++)r[e].draw()}};var s=function(e){if(["setup","draw"].includes(e))return"continue";o[e]=function(i){a[e].call(o,i,o,t);for(var n=0;n<r.length;n++){var s=r[n];s.options.on&&s.options.on[e]&&s.options.on[e].call(s,i,o,t)}}};for(var p in a)s(p)}}(t),r=t;return{startAnimate:function(){t.animateState=!0},initCanvas:function(t){return e=new o.default(n,t)},addProcess:function(){if(!e)throw Error("[p5-hook] please initCanvas before adding process");for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];for(var a=0;a<o.length;a++)o[a].init(e,r);i.push.apply(i,o)}}},Object.defineProperty(t,"__esModule",{value:!0})}));